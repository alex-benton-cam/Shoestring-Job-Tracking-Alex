<!doctype html>
<html lang="en">

  <head>

    <!-- Title and favicon-->
    <title>Shoestring</title>
    <link rel="shortcut icon" href="/static/assets/favicon.ico">

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Bootstrap CSS v5.0.2 -->
    <link rel="stylesheet" href="/static/css/bootstrap.css">
    <link rel="stylesheet" href="/static/icons/bootstrap-icons.css">


    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link rel="stylesheet" href="/static/datatables/datatables.min.css">


  </head>


  <body class="d-flex flex-column min-vh-100">


    <!-- Navbar (Top of page) -->
    <header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
      <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="#">Shoestring Job Tracking</a>
      <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse"
        data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="navbar-nav">
        <div class="nav-item text-nowrap">
          <a class="nav-link px-3" href="#">Sign out</a>
        </div>
      </div>
    </header>
    <!-- Sidebar -->
    <div class="container-fluid">
      <div class="row">
        <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
          <ul class="nav flex-column mb-auto">

            <li class="nav-item active">
              <a class="nav-link" href="/upload">
                <i class="bi-file-arrow-up"></i>
                <span>&nbspUpload Ops</span>
              </a>
            </li>


            <li class="nav-item active">
              <a class="nav-link" href="/mgsetup">
                <i class="bi-cloud"></i>
                <span>&nbspSetup Data</span>
              </a>
            </li>

            <hr>

            <li class="nav-item active">
              <a class="nav-link" href="/jobs">
                <i class="bi-briefcase"></i>
                <span>&nbspJobs</span>
              </a>
            </li>


            <li class="nav-item active">
              <a class="nav-link" href="/operations">
                <i class="bi-clipboard-check"></i>
                <span>&nbspOperations</span>
              </a>
            </li>


            <li class="nav-item active">
              <a class="nav-link" href="/locations">
                <i class="bi-pin-angle"></i>
                <span>&nbspLocations</span>
              </a>
            </li>


            <li class="nav-item active">
              <a class="nav-link" href="/workers">
                <i class="bi-person-badge"></i>
                <span>&nbspWorkers</span>
              </a>
            </li>

            <hr>

            <li class="nav-item active">
              <a class="nav-link" href="/factory">
                <i class="bi-building"></i>
                <span>&nbspFactory Floor</span>
              </a>
            </li>


            <li class="nav-item active">
              <a class="nav-link" href="/machine">
                <i class="bi-motherboard"></i>
                <span>&nbspMachine Dash</span>
              </a>
            </li>


            <li class="nav-item active">
              <a class="nav-link" href="/operation">
                <i class="bi-card-checklist"></i>
                <span>&nbspOperation</span>
              </a>
            </li>

            <ul class="nav flex-column mt-auto position-absolute bottom-0">
              <!--
              <li class="nav-item active">
                <a class="nav-link" href="/operation/">
                  <i class="bi-card-text"></i>
                  <span id="machine_footer_name">&nbspW/3390/A15</span>
                </a>
              </li>
            -->

              <li class="nav-item active">
                <a class="nav-link" href="/machine/">
                  <i class="bi-pin-angle"></i>
                  <span id="machine_footer_name">&nbspT5</span>
                </a>
              </li>

              <li class="nav-item active">
                <a id="live_status" class="nav-link" href="#">
                  <i class="bi-wifi-1 text-warning"></i>
                  <span class="text-warning">&nbspConnecting</span>
                </a>
              </li>
            </ul>
      </div>
      </nav>
      <!-- Main Content -->
      <main class="col-md-9 ms-sm-auto col-lg-10 pt-3">

        <div class="modal fade" id="call_manager_modal" aria-labelledby="modalLabel2" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="card-header">Help Needed</div>
              <div class="card-body">
                Help has been called at <span id="call_manager_location"></span>
              </div>
            </div>
          </div>
        </div>


        <div class="container-fluid">
          <div class="row">
            <div class="col-12 mb-3">
              <div class="card">
                <div class="card-body">
                  <table id="modelTable" class="table table-striped nowrap table-hover" style="width:100%">
                    <thead>
                      <tr>

                        <th>Work No</th>

                        <th>Company</th>

                        <th>Job Name</th>

                        <th>Qty.</th>

                        <th>Current Op</th>

                        <th>Op Status</th>

                        <th>Current Location</th>

                      </tr>
                    </thead>
                    <tbody>

                      <tr>

                        <td>

                          <a href=/job/w10759>W/10759 </a> </td> <td>

                            Maleo Manufacturing

                        </td>

                        <td>

                          pin

                        </td>

                        <td>

                          194

                        </td>

                        <td>

                          <a href=/operation/w10759a40i>W/10759/A40I </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/interim-insp>Interim Insp.</a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w7063>W/7063 </a> </td> <td>

                            Doover Industrial Systems

                        </td>

                        <td>

                          washing machine

                        </td>

                        <td>

                          11

                        </td>

                        <td>

                          <a href=/operation/w7063a35>W/7063/A35 </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/t4>T4 </a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w3262>W/3262 </a> </td> <td>

                            Meteorite Manufacturers

                        </td>

                        <td>

                          hand bag

                        </td>

                        <td>

                          378

                        </td>

                        <td>

                          <a href=/operation/w3262a00>W/3262/A00 </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/unreleased>Unreleased </a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w21356>W/21356 </a> </td> <td>

                            Meteorite Manufacturers

                        </td>

                        <td>

                          soccer ball

                        </td>

                        <td>

                          195

                        </td>

                        <td>

                          <a href=/operation/w21356a00>W/21356/A00 </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/unreleased>Unreleased </a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w4524>W/4524 </a> </td> <td>

                            Zeus Produce Industries

                        </td>

                        <td>

                          sofa

                        </td>

                        <td>

                          42

                        </td>

                        <td>

                          <a href=/operation/w4524a00>W/4524/A00 </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/unreleased>Unreleased </a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w5897>W/5897 </a> </td> <td>

                            Manufacturing Corner

                        </td>

                        <td>

                          keyboard

                        </td>

                        <td>

                          213

                        </td>

                        <td>

                          <a href=/operation/w5897a00>W/5897/A00 </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/unreleased>Unreleased </a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w9708>W/9708 </a> </td> <td>

                            Zeus Produce Industries

                        </td>

                        <td>

                          lamp shade

                        </td>

                        <td>

                          202

                        </td>

                        <td>

                          <a href=/operation/w9708a00>W/9708/A00 </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/unreleased>Unreleased </a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w7754>W/7754 </a> </td> <td>

                            Manestical Energy Co

                        </td>

                        <td>

                          lamp shade

                        </td>

                        <td>

                          45

                        </td>

                        <td>

                          <a href=/operation/w7754a00>W/7754/A00 </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/unreleased>Unreleased </a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w10079>W/10079 </a> </td> <td>

                            Maleo Manufacturing

                        </td>

                        <td>

                          cookie tin

                        </td>

                        <td>

                          262

                        </td>

                        <td>

                          <a href=/operation/w10079a00>W/10079/A00 </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/unreleased>Unreleased </a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w16015>W/16015 </a> </td> <td>

                            Zeus Produce Industries

                        </td>

                        <td>

                          pickle jar

                        </td>

                        <td>

                          374

                        </td>

                        <td>

                          <a href=/operation/w16015a00>W/16015/A00 </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/unreleased>Unreleased </a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w26717>W/26717 </a> </td> <td>

                            Zeus Produce Industries

                        </td>

                        <td>

                          lock and key

                        </td>

                        <td>

                          499

                        </td>

                        <td>

                          <a href=/operation/w26717a00>W/26717/A00 </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/unreleased>Unreleased </a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w29540>W/29540 </a> </td> <td>

                            Manestical Energy Co

                        </td>

                        <td>

                          pickle jar

                        </td>

                        <td>

                          173

                        </td>

                        <td>

                          <a href=/operation/w29540a00>W/29540/A00 </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/unreleased>Unreleased </a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w29376>W/29376 </a> </td> <td>

                            Manufacturing Corner

                        </td>

                        <td>

                          duffel bag

                        </td>

                        <td>

                          454

                        </td>

                        <td>

                          <a href=/operation/w29376a00>W/29376/A00 </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/unreleased>Unreleased </a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w9868>W/9868 </a> </td> <td>

                            Golden Triad Technology

                        </td>

                        <td>

                          sunglasses

                        </td>

                        <td>

                          173

                        </td>

                        <td>

                          <a href=/operation/w9868a00>W/9868/A00 </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/unreleased>Unreleased </a> </td> </tr> <tr>

                        <td>

                          <a href=/job/w3390>W/3390 </a> </td> <td>

                            Manestical Energy Co

                        </td>

                        <td>

                          rock

                        </td>

                        <td>

                          112

                        </td>

                        <td>

                          <a href=/operation/w3390a15i>W/3390/A15I </a> </td> <td>

                            Active

                        </td>

                        <td>

                          <a href=/location/interim-insp>Interim Insp.</a> </td> </tr> </tbody> <tfoot>
                      <tr>

                        <th>Work No</th>

                        <th>Company</th>

                        <th>Job Name</th>

                        <th>Qty.</th>

                        <th>Current Op</th>

                        <th>Op Status</th>

                        <th>Current Location</th>

                      </tr>
                      </tfoot>

                  </table>
                  <script type="text/javascript" src="/static/datatables/datatables.min.js"></script>


                  <script>
                    $(document).ready(function () {
                      var table = $('#modelTable').DataTable({
                        scrollX: true,
                      });
                    });

                  </script>


                </div>
              </div>
            </div>
          </div>
        </div>

      </main>
    </div>
    </div>
    <footer class="mt-auto">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-3 col-lg-2 d-md-block">Placeholder</div>
          <div class="col-md-9 col-lg-10 text-center">
            <a class="text-decoration-none link-secondary"
              href="https://www.ifm.eng.cam.ac.uk/research/dial/research-projects/digital-manufacturing-on-a-shoestring/">
              <h6>Copyright &copy; Shoestring 2022</h6>
            </a>
          </div>
        </div>
      </div>
    </footer>


    <script src="/static/js/bootstrap.bundle.min.js"></script>

    <script type="text/javascript" src="/static/js/wslib.js"> </script>


    <script src="/static/js/dashboard.js"></script>
    <script>
      var myModal = new bootstrap.Modal(document.getElementById("modal_confirm"), {});
      document.onreadystatechange = function () {
        myModal.show();
      };

    </script>
    <script>
      function getCookie(cookieName) {
        let cookie = {};
        document.cookie.split(';').forEach(function (el) {
          let [key, value] = el.split('=');
          cookie[key.trim()] = value;
        })
        return cookie[cookieName];
      }

      function status_connect() {
        var status = document.getElementById("live_status");
        status.innerHTML = '<i class="bi-wifi text-success"></i>&nbsp<span class="text-success">Connected</span>';
      }

      function status_disconnect() {
        var status = document.getElementById("live_status");
        status.innerHTML = '<i class="bi-wifi-off text-danger"></i>&nbsp<span class="text-danger">Disconnected</span>';
      }

      function call_manager(location) {
        if [ & #39;Release&# 39;, & #39;Program&# 39;, & #39;Tooling&# 39;, & #39;MT1&# 39;, & #39;T1&# 39;, &
          #39;T2&# 39;, & #39;T3&# 39;, & #39;T4&# 39;, & #39;T5&# 39;, & #39;T6&# 39;, & #39;T7&# 39;, &
          #39;T9&# 39;, & #39;G1&# 39;, & #39;G2&# 39;, & #39;G3&# 39;, & #39;MAT1&# 39;, & #39;I1&# 39;, &
          #39;I2&# 39;, & #39;M1&# 39;, & #39;M2&# 39;, & #39;M3&# 39;, & #39;M4&# 39;, & #39;M5&# 39;, &
          #39;M6&# 39;, & #39;M7&# 39;, & #39;M8&# 39;, & #39;M9&# 39;, & #39;M10&# 39;, & #39;M11&# 39;, &
          #39;M12&# 39;, & #39;Assembly1&# 39;, & #39;Assembly2&# 39;, & #39;Inspection1&# 39;, &
          #39;Inspection2&# 39;, & #39;InspGI&# 39;, & #39;SubCon&# 39;, & #39;Packing&# 39;, & #39;Unreleased&# 39;, &
          #39;Finished&# 39;, & #39;Interim Insp.&# 39;
        ].includes(location) {
          var call_manager_location_field = document.getElementById("call_manager_location");
          call_manager_location_field.innerHTML = location;
          $("#call_manager_modal").modal()
        }
      }

      var wsc = new wsClient();
      wsc.connect("ws://" + window.location.host + "/ws/stateupdates");
      //wsc.register_connect_callback(status_connect);
      //wsc.register_disconnect_callback(status_disconnect);

      //Can be moved to place where needed
      var wsm = new wsClient();
      wsm.connect("ws://" + window.location.host + "/ws/manager");
      wsm.register_callback("call_manager_button", (message) => alert(message));
      wsm.register_connect_callback(status_connect);
      wsm.register_disconnect_callback(status_disconnect);

    </script>


  </body>

</html>
